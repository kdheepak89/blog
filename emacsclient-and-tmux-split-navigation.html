<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="google-site-verification" content="3d6xHqlzI1rCDvtORnxS6U3zjMSkqhP939kXsP7VR5U" />
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="keywords" content="emacsclient, terminal, workflow, tmux, split, navigation">
  <meta name="description" content="I use the following set of lisps my .emacs to get seamless navigation between emacs splits and tmux panes …">
  <meta property="og:url" content="https://blog.kdheepak.com/emacsclient-and-tmux-split-navigation.html"/>
  <meta property="og:title" content="Emacsclient and tmux split navigation"/>
  <meta property="og:description" content="I use the following set of lisps my .emacs to get seamless navigation between emacs splits and tmux panes …"/>
  <meta property="og:published_time" content=""/>
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://blog.kdheepak.com/rss.xml"/>
  <title>Emacsclient and tmux split navigation</title>
  <style>code{white-space: pre;}</style>
  <style>
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="/css/latex.css"/>
  <link rel="stylesheet" href="/css/tufte-extra.css"/>
  <link rel="stylesheet" href="/css/table.css"/>
  <link rel="stylesheet" href="/css/github.css"/>
  <link rel="stylesheet" href="/css/pandoc.css"/>
  <link rel="stylesheet" href="/css/tufte.css"/>
  <link rel="stylesheet" href="/css/kudos.css"/>
  <link rel="stylesheet" href="/css/table.css"/>
  <link rel="stylesheet" href="/css/custom.css"/>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<article>
<header>
<h1 class="title">
    <a class="home" href="https://kdheepak.com">~</a> /
        <a class="bloghome" href="/">blog</a> /
        Emacsclient and tmux split navigation
</h1>
<p class="subtitle sourceurl">
 <a class="sourceurl" target="_blank" href="https://github.com/kdheepak/blog/blob/b2962a1c3e5008f95b6e50937f42ae70cb9cd47a/content/16-emacsclient-tmux.md">
    Mon, Jul 27, 2015
 </a>
</p>
</header>
<section>
<p>I’ve described some of the scripts that I use regularly when using emacs in the terminal. I also using emacs with tmux, even though it seems like emacs itself could be tweaked to replace tmux. Currently, my tmux+zsh setup has been much more powerful that what emacs alone can provide. zsh did not play well, even with multiterm and I’ve had mixed results with getting ipython to work well inside emacs.</p>
<p>I use the following set of lisps my .emacs to get seamless navigation between emacs splits and tmux panes.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode lisp"><code class="sourceCode commonlisp"><span id="cb1-1"><a href="#cb1-1"></a><span class="co">;; Many thanks to the author of and contributors to the following posts:</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="co">;; https://gist.github.com/mislav/5189704</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="co">;; https://robots.thoughtbot.com/post/53022241323/seamlessly-navigate-vim-and-tmux-splits</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co">;;</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="co">;; TODO: Make a script that generates tmux and emacs code without duplication</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co">;;</span></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="co">;; NOTE: My keybindings are not the default emacs ones, using windmove</span></span>
<span id="cb1-8"><a href="#cb1-8"></a></span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="co">;; Try to move direction, which is supplied as arg</span></span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="co">;; If cannot move that direction, send a tmux command to do appropriate move</span></span>
<span id="cb1-11"><a href="#cb1-11"></a>(<span class="kw">defun</span><span class="fu"> windmove-emacs-or-tmux</span>(dir tmux-cmd)</span>
<span id="cb1-12"><a href="#cb1-12"></a>(interactive)</span>
<span id="cb1-13"><a href="#cb1-13"></a>(<span class="kw">if</span> (<span class="kw">ignore-errors</span> (<span class="kw">funcall</span> (<span class="kw">intern</span> (concat <span class="st">&quot;windmove-&quot;</span> dir))))</span>
<span id="cb1-14"><a href="#cb1-14"></a><span class="kw">nil</span>                       <span class="co">;; Moving within emacs</span></span>
<span id="cb1-15"><a href="#cb1-15"></a>(shell-command tmux-cmd)) <span class="co">;; At edges, send command to tmux</span></span>
<span id="cb1-16"><a href="#cb1-16"></a>)</span>
<span id="cb1-17"><a href="#cb1-17"></a></span>
<span id="cb1-18"><a href="#cb1-18"></a><span class="co">;Move between windows with custom keybindings</span></span>
<span id="cb1-19"><a href="#cb1-19"></a>(global-set-key (kbd <span class="st">&quot;C-k&quot;</span>)</span>
<span id="cb1-20"><a href="#cb1-20"></a>   &#39;(<span class="kw">lambda</span> () (interactive) (windmove-emacs-or-tmux <span class="st">&quot;up&quot;</span>  <span class="st">&quot;tmux select-pane -U&quot;</span>)))</span>
<span id="cb1-21"><a href="#cb1-21"></a>(global-set-key (kbd <span class="st">&quot;C-j&quot;</span>)</span>
<span id="cb1-22"><a href="#cb1-22"></a>   &#39;(<span class="kw">lambda</span> () (interactive) (windmove-emacs-or-tmux <span class="st">&quot;down&quot;</span>  <span class="st">&quot;tmux select-pane -D&quot;</span>)))</span>
<span id="cb1-23"><a href="#cb1-23"></a>(global-set-key (kbd <span class="st">&quot;C-l&quot;</span>)</span>
<span id="cb1-24"><a href="#cb1-24"></a>   &#39;(<span class="kw">lambda</span> () (interactive) (windmove-emacs-or-tmux <span class="st">&quot;right&quot;</span> <span class="st">&quot;tmux select-pane -R&quot;</span>)))</span>
<span id="cb1-25"><a href="#cb1-25"></a>(global-set-key (kbd <span class="st">&quot;C-h&quot;</span>)</span>
<span id="cb1-26"><a href="#cb1-26"></a>   &#39;(<span class="kw">lambda</span> () (interactive) (windmove-emacs-or-tmux <span class="st">&quot;left&quot;</span>  <span class="st">&quot;tmux select-pane -L&quot;</span>)))</span></code></pre></div>
<p>The following was added to .tmux.conf</p>
<pre class="tmux"><code>    ## Smart pane switching with awareness of emacs splits.
    bind -n C-h run &quot;(tmux display-message -p &#39;#{pane_current_command}&#39; | grep -iqE &#39;(^|\/)g?(view|emacs?)(diff)?$&#39; &amp;&amp; tmux send-keys C-h) || tmux select-pane -L&quot;
    bind -n C-j run &quot;(tmux display-message -p &#39;#{pane_current_command}&#39; | grep -iqE &#39;(^|\/)g?(view|emacs?)(diff)?$&#39; &amp;&amp; tmux send-keys C-j) || tmux select-pane -D&quot;
    bind -n C-k run &quot;(tmux display-message -p &#39;#{pane_current_command}&#39; | grep -iqE &#39;(^|\/)g?(view|emacs?)(diff)?$&#39; &amp;&amp; tmux send-keys C-k) || tmux select-pane -U&quot;
    bind -n C-l run &quot;(tmux display-message -p &#39;#{pane_current_command}&#39; | grep -iqE &#39;(^|\/)g?(view|emacs?)(diff)?$&#39; &amp;&amp; tmux send-keys C-l) || tmux select-pane -R&quot;
    bind -n C-\ run &quot;(tmux display-message -p &#39;#{pane_current_command}&#39; | grep -iqE &#39;(^|\/)g?(view|emacs?)(diff)?$&#39; &amp;&amp; tmux send-keys &#39;C-\\&#39;) || tmux select-pane -l&quot;</code></pre>
</section>
<section>

    <div class="kudo-container" style="display: none" data-post-id="emacsclient-and-tmux-split-navigation">
        <button class="kudo-button" aria-label="Give this post a kudo">
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="kudo-heart" x="0px" y="0px" width="512px" height="512px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve">
            <path class="kudo-heart-path" id="kudo-heart-path" d="M429.9,95.6c-40.4-42.1-106-42.1-146.4,0L256,124.1l-27.5-28.6c-40.5-42.1-106-42.1-146.4,0c-45.5,47.3-45.5,124.1,0,171.4   L256,448l173.9-181C475.4,219.7,475.4,142.9,429.9,95.6z" />
          </svg>
        </button>
        <div class="kudo-count-message">
          <span class="kudo-count"></span> <span class="kudo-word"></span>
        </div>
        <div class="kudo-thanks">
          <div class="kudo-thanks-heading">Thanks!</div>
        </div>
    </div>

</section>
<section>
    <opt-in-script src="https://utteranc.es/client.js"
        repo="kdheepak/blog"
        issue-term="url"
        theme="github-light"
        crossorigin="anonymous"
        async>
    <button class="comments-button">Show Comments</button>
    </opt-in-script>
</section>
</article>
<script>
var figures =
  Array.prototype.slice.call(document.getElementsByClassName("figure"),0)
  .concat(
    Array.prototype.slice.call(document.getElementsByTagName("figure"),0));

for (var i = 0; i < figures.length; i++) {
  var figure = figures[i];
  var imgs = figure.getElementsByTagName("img");
  if (imgs.length > 0) {
    classes = imgs[0].classList;
    for (var j = 0; j < classes.length; j++) {
        if (classes[j] === "fullwidth") {
            figure.classList.add(classes[j]);
        }
    }
  }
}
</script>
<footer>
    <p>
    <a rel="license noopener noreferrer" target="_blank" href="http://creativecommons.org/licenses/by/4.0/"><img alt="This work is licensed under a Creative Commons Attribution 4.0 International License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a>
    </p>
</footer>
<script data-goatcounter="https://kdheepak.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/vim.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/julia.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/nim.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/latex.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/matlab.min.js"></script>
<script>
    document.querySelectorAll('pre:not([class])').forEach(function($) {
        $.className = 'no-highlight';
    });
    hljs.initHighlightingOnLoad();
</script>
<script src="/js/opt-in-script.js"></script>
<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-database.js"></script>
<script>
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyC_lk4_TkwwjzgthwVBR0JXrDRQMH2mDH8",
    authDomain: "blog-4ac79.firebaseapp.com",
    databaseURL: "https://blog-4ac79.firebaseio.com",
    projectId: "blog-4ac79",
    storageBucket: "blog-4ac79.appspot.com",
    messagingSenderId: "57327928077",
    appId: "1:57327928077:web:5acf8eaf01bcb850d76644",
    measurementId: "G-YKT2PQSD10"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
</script>
<script src="/js/kudos.js"></script>
</body>
</html>
