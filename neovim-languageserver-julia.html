<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="google-site-verification" content="3d6xHqlzI1rCDvtORnxS6U3zjMSkqhP939kXsP7VR5U" />
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="keywords" content="neovim, vim, languageserver, julia, lsp">
  <meta name="description" content="Showcasing Neovim and LanguageServer.jl">
  <meta property="og:url" content="https://blog.kdheepak.com/neovim-languageserver-julia.html"/>
  <meta property="og:title" content="Neovim + LanguageServer.jl"/>
  <meta property="og:description" content="Showcasing Neovim and LanguageServer.jl"/>
  <meta property="og:published_time" content=""/>
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://blog.kdheepak.com/rss.xml"/>
  <title>Neovim + LanguageServer.jl</title>
  <style>code{white-space: pre;}</style>
  <link rel="stylesheet" href="/css/latex.css"/>
  <link rel="stylesheet" href="/css/tufte-extra.css"/>
  <link rel="stylesheet" href="/css/table.css"/>
  <link rel="stylesheet" href="/css/github.css"/>
  <link rel="stylesheet" href="/css/pandoc.css"/>
  <link rel="stylesheet" href="/css/tufte.css"/>
  <link rel="stylesheet" href="/css/kudos.css"/>
  <link rel="stylesheet" href="/css/custom.css"/>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<article>
<header>
<h1 class="title">
    <a class="home" href="https://kdheepak.com">~</a> /
        <a class="bloghome" href="/">blog</a> /
        Neovim + LanguageServer.jl
</h1>
<p class="subtitle sourceurl">
 <a class="sourceurl" target="_blank" href="https://github.com/kdheepak/blog/blob/b2962a1c3e5008f95b6e50937f42ae70cb9cd47a/content/32-neovim-languageserver-julia.md">
    Tue, Jun 02, 2020
 </a>
</p>
</header>
<section>
<p>This is a showcase of some of the capabilities of <a href="https://github.com/julia-vscode/LanguageServer.jl" target="_blank">Julia’s LanguageServer.jl</a> and <a href="https://neovim.io/doc/user/lsp.html" target="_blank">Neovim’s built-in Language Server Protocol (LSP) client</a>, as well as the instructions to install this setup.</p>
<section id="capabilities" class="level1">
<h1><a href="#capabilities">#</a> Capabilities</h1>
<p>The <code>.vimrc</code> code corresponding to the capability is linked in the caption of each screencapture.</p>
<section id="completion" class="level2">
<h2><a href="#completion">#</a> Completion</h2>
<figure>
<img src="images/autocomplete.mov.gif" alt="" /><figcaption><a href="https://github.com/kdheepak/dotfiles/blob/9f2f76877e0b6ace32c109d95e206ee9f1851193/vimrc#L648" target="_blank">vim.lsp.omnifunc</a></figcaption>
</figure>
</section>
<section id="documentation" class="level2">
<h2><a href="#documentation">#</a> Documentation</h2>
<figure>
<img src="images/documentation.mov.gif" alt="" /><figcaption><a href="https://github.com/kdheepak/dotfiles/blob/9f2f76877e0b6ace32c109d95e206ee9f1851193/vimrc#L971" target="_blank">vim.lsp.buf.hover</a></figcaption>
</figure>
</section>
<section id="jump-to-definition" class="level2">
<h2><a href="#jump-to-definition">#</a> Jump to definition</h2>
<figure>
<img src="images/jumptodefinition.mov.gif" alt="" /><figcaption><a href="https://github.com/kdheepak/dotfiles/blob/9f2f76877e0b6ace32c109d95e206ee9f1851193/vimrc#L968" target="_blank">vim.lsp.buf.definition</a></figcaption>
</figure>
</section>
<section id="linting" class="level2">
<h2><a href="#linting">#</a> Linting</h2>
<figure>
<img src="images/linting.mov.gif" alt="" /><figcaption><a href="https://github.com/kdheepak/dotfiles/blob/9f2f76877e0b6ace32c109d95e206ee9f1851193/vimrc#L992" target="_blank">vim.lsp.util.show_line_diagnostics</a></figcaption>
</figure>
</section>
<section id="references" class="level2">
<h2><a href="#references">#</a> References</h2>
<figure>
<img src="images/references.mov.gif" alt="" /><figcaption><a href="https://github.com/kdheepak/dotfiles/blob/9f2f76877e0b6ace32c109d95e206ee9f1851193/vimrc#L983" target="_blank">vim.lsp.buf.references</a></figcaption>
</figure>
</section>
<section id="document-symbols" class="level2">
<h2><a href="#document-symbols">#</a> Document symbols</h2>
<figure>
<img src="images/symbols.mov.gif" alt="" /><figcaption><a href="https://github.com/kdheepak/dotfiles/blob/9f2f76877e0b6ace32c109d95e206ee9f1851193/vimrc#L986" target="_blank">vim.lsp.buf.document_symbol</a></figcaption>
</figure>
</section>
</section>
<section id="install" class="level1">
<h1><a href="#install">#</a> Install</h1>
<p>If you’d like to use this you will need the following:</p>
<ol type="1">
<li><a href="https://github.com/neovim/neovim/releases/tag/nightly" target="_blank">neovim v0.5.0</a></li>
<li><a href="https://github.com/neovim/nvim-lsp" target="_blank"><code>neovim/nvim-lsp</code></a></li>
</ol>
<p>The <code>neovim/nvim-lsp</code> repository contains language server configurations for a bunch of languages. Once you have <code>neovim/nvim-lsp</code> installed with your favorite plugin manager, you can run <code>:LspInstall julials</code>. That will download and install <code>LanguageServer.jl</code> and <code>SymbolServer.jl</code> into your global environment. You may also want <a href="https://github.com/JuliaEditorSupport/julia-vim" target="_blank"><code>JuliaEditorSupport/julia-vim</code></a> for syntax highlighting and other niceties.</p>
<p><del>At the moment you’ll have to make some changes to <code>julials</code> file. The changes required are in this PR: <a href="https://github.com/neovim/nvim-lsp/pull/258" class="uri" target="_blank">https://github.com/neovim/nvim-lsp/pull/258</a>.</del></p>
<p>And, at the moment neovim v0.5.0 isn’t released yet. You’ll have to get the latest commit on <code>master</code> and build from source, or download a release from the <a href="https://github.com/neovim/neovim/releases/tag/nightly" target="_blank"><code>nightly</code></a> tag on github. This also means that the lsp client is not stable yet. If you run into any issues, open an issue on <a href="https://github.com/neovim/neovim/issues" class="uri" target="_blank">https://github.com/neovim/neovim/issues</a>.</p>
<p>Here is a minimal <code>.vimrc</code> configuration that works with <code>NVIM v0.5.0-539-g91e41c857</code>.</p>
<pre class="vim"><code>set nocompatible
filetype off

if empty(glob(&#39;~/.local/share/nvim/site/autoload/plug.vim&#39;))
  silent !curl -fLo ~/.local/share/nvim/site/autoload/plug.vim --create-dirs
    \ https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
  autocmd VimEnter * PlugInstall --sync | source $MYVIMRC
endif

call plug#begin(&#39;~/.local/share/nvim/plugged&#39;)

Plug &#39;JuliaEditorSupport/julia-vim&#39;
Plug &#39;neovim/nvim-lsp&#39;

call plug#end()

lua &lt;&lt; EOF
    require&#39;nvim_lsp&#39;.julials.setup{}
EOF

autocmd Filetype julia setlocal omnifunc=v:lua.vim.lsp.omnifunc

nnoremap &lt;silent&gt; &lt;c-]&gt; &lt;cmd&gt;lua vim.lsp.buf.definition()&lt;CR&gt;
nnoremap &lt;silent&gt; K     &lt;cmd&gt;lua vim.lsp.buf.hover()&lt;CR&gt;
nnoremap &lt;silent&gt; gr    &lt;cmd&gt;lua vim.lsp.buf.references()&lt;CR&gt;
nnoremap &lt;silent&gt; g0    &lt;cmd&gt;lua vim.lsp.buf.document_symbol()&lt;CR&gt;</code></pre>
<p>Once you have this, you should be able to open a <code>.jl</code> file and <code>LanguageServer.jl</code> will start up! It may take some time for <code>SymbolServer.jl</code> to cache the symbols the first time you run it, so be prepared to wait for a while. You can type <code>:lua print(vim.lsp.get_log_path())&lt;CR&gt;</code> in neovim to get the path to the language server log file. When you see <code>[ Info: Received new data from Julia Symbol Server.</code> you should be good to go.</p>
</section>
<section id="bibliography" class="level1 unnumbered">
<h1 class="unnumbered"><a href="#bibliography">#</a> References</h1>
<div id="refs" class="references" role="doc-bibliography">
<div id="ref-nonjedieglot">
<p>[1] “LanguageServer.jl with emacs eglot.” [Online]. Available: <a href="https://github.com/non-Jedi/eglot-jl/" target="_blank">https://github.com/non-Jedi/eglot-jl/</a>.</p>
</div>
</div>
</section>
</section>
<section>

    <div class="kudo-container" style="display: none" data-post-id="neovim-languageserver-julia">
        <button class="kudo-button" aria-label="Give this post a kudo">
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="kudo-heart" x="0px" y="0px" width="512px" height="512px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve">
            <path class="kudo-heart-path" id="kudo-heart-path" d="M429.9,95.6c-40.4-42.1-106-42.1-146.4,0L256,124.1l-27.5-28.6c-40.5-42.1-106-42.1-146.4,0c-45.5,47.3-45.5,124.1,0,171.4   L256,448l173.9-181C475.4,219.7,475.4,142.9,429.9,95.6z" />
          </svg>
        </button>
        <div class="kudo-count-message">
          <span class="kudo-count"></span> <span class="kudo-word"></span>
        </div>
        <div class="kudo-thanks">
          <div class="kudo-thanks-heading">Thanks!</div>
        </div>
    </div>

</section>
<section>
    <opt-in-script src="https://utteranc.es/client.js"
        repo="kdheepak/blog"
        issue-term="url"
        theme="github-light"
        crossorigin="anonymous"
        async>
    <button class="comments-button">Show Comments</button>
    </opt-in-script>
</section>
</article>
<script>
var figures =
  Array.prototype.slice.call(document.getElementsByClassName("figure"),0)
  .concat(
    Array.prototype.slice.call(document.getElementsByTagName("figure"),0));

for (var i = 0; i < figures.length; i++) {
  var figure = figures[i];
  var imgs = figure.getElementsByTagName("img");
  if (imgs.length > 0) {
    classes = imgs[0].classList;
    for (var j = 0; j < classes.length; j++) {
        if (classes[j] === "fullwidth") {
            figure.classList.add(classes[j]);
        }
    }
  }
}
</script>
<footer>
    <p>
    <a rel="license noopener noreferrer" target="_blank" href="http://creativecommons.org/licenses/by/4.0/"><img alt="This work is licensed under a Creative Commons Attribution 4.0 International License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a>
    </p>
</footer>
<script data-goatcounter="https://kdheepak.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/vim.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/julia.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/nim.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/latex.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/matlab.min.js"></script>
<script>
    document.querySelectorAll('pre:not([class])').forEach(function($) {
        $.className = 'no-highlight';
    });
    hljs.initHighlightingOnLoad();
</script>
<script src="/js/opt-in-script.js"></script>
<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-database.js"></script>
<script>
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyC_lk4_TkwwjzgthwVBR0JXrDRQMH2mDH8",
    authDomain: "blog-4ac79.firebaseapp.com",
    databaseURL: "https://blog-4ac79.firebaseio.com",
    projectId: "blog-4ac79",
    storageBucket: "blog-4ac79.appspot.com",
    messagingSenderId: "57327928077",
    appId: "1:57327928077:web:5acf8eaf01bcb850d76644",
    measurementId: "G-YKT2PQSD10"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
</script>
<script src="/js/kudos.js"></script>
</body>
</html>
