<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="google-site-verification" content="3d6xHqlzI1rCDvtORnxS6U3zjMSkqhP939kXsP7VR5U" />
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="keywords" content="ascii, svgbob, pandoc, filter, lua, circuit, diagrams">
  <meta name="description" content="Drawing ascii diagrams and rendering them to svg using svgbob, pandoc and lua filters">
  <meta property="og:url" content="https://blog.kdheepak.com/drawing-in-ascii.html"/>
  <meta property="og:title" content="Drawing in ASCII"/>
  <meta property="og:description" content="Drawing ascii diagrams and rendering them to svg using svgbob, pandoc and lua filters"/>
  <meta property="og:published_time" content=""/>
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://blog.kdheepak.com/rss.xml"/>
  <title>Drawing in ASCII</title>
  <style>code{white-space: pre;}</style>
  <link rel="stylesheet" href="/css/latex.css"/>
  <link rel="stylesheet" href="/css/tufte-extra.css"/>
  <link rel="stylesheet" href="/css/table.css"/>
  <link rel="stylesheet" href="/css/github.css"/>
  <link rel="stylesheet" href="/css/pandoc.css"/>
  <link rel="stylesheet" href="/css/tufte.css"/>
  <link rel="stylesheet" href="/css/kudos.css"/>
  <link rel="stylesheet" href="/css/custom.css"/>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<article>
<header>
<h1 class="title">
    <a class="home" href="https://kdheepak.com">~</a> /
        <a class="bloghome" href="/">blog</a> /
        Drawing in ASCII
</h1>
<p class="subtitle sourceurl">
 <a class="sourceurl" target="_blank" href="https://github.com/kdheepak/blog/blob/b2962a1c3e5008f95b6e50937f42ae70cb9cd47a/content/33-drawing-ascii-circuit-diagrams.md">
    Fri, Jun 05, 2020
 </a>
</p>
</header>
<section>
<p>Here is a simple 3-bus circuit diagram using text / ascii.</p>
<pre><code>           |           +-----------+           |
           +-----------+           +-----------+
           |           +-----------+           |
     +-----+1               y12               2+------+
     |     |                                   |      |
     |     +-+                               +-+      |
   .-+-.   |  \                             /  |    .-+-.
   |   |       \                           /        |   |
   |   |y1    .-+-.                     .-+-.     y2|   |
   &#39;-+-&#39;       \   \ y13          y23  /   /        &#39;-+-&#39;
     |          \   \                 /   /           |
     |           &#39;-+-&#39;               &#39;-+-&#39;            |
  -------           \                 /            -------
    ---              +               +               ---
     -               |        3      |                -
                  ---+-------+-------+---
                             |
                           .-+-.
                           |   |
                           |   |y3
                           &#39;-+-&#39;
                             |
                             |
                          -------
                           -----
                             -</code></pre>
<p>We can define <a href="https://github.com/kdheepak/blog/blob/39513edbb284ed29ce58508f74192d189603c96d/scripts/render.lua" target="_blank">a lua filter for pandoc</a> that takes a code block that has the language defined as <code>render_svgbob</code>, and passes the text inside that code block to <a href="https://github.com/ivanceras/svgbob" target="_blank">svgbob</a>. For example:</p>
<pre><code>```render_svgbob
text here will be passed to svgbob
```</code></pre>
<p>This is what it would look like when the above ascii image is rendered on this blog:</p>
<p><svg xmlns="http://www.w3.org/2000/svg" width="472" height="432">
    <style>line, path, circle,rect,polygon {
                          stroke: black;
                          stroke-width: 2;
                          stroke-opacity: 1;
                          fill-opacity: 1;
                          stroke-linecap: round;
                          stroke-linejoin: miter;
                        }

                    text {
                        /* This fix the spacing bug in svg text*/
                        white-space: pre;
                        fill: black;
                        }
                        rect.backdrop{
                            stroke: none;
                            fill: transparent;
                        }
                        .broken{
                            stroke-dasharray: 8;
                        }
                        .filled{
                            fill: black;
                        }
                        .bg_filled{
                            fill: transparent;
                        }
                        .nofill{
                            fill: transparent;
                        }

                        text {
                         font-family: monospace;
                         font-size: 14px;
                        }

                        .end_marked_arrow{
                            marker-end: url(#arrow);
                         }
                        .start_marked_arrow{
                            marker-start: url(#arrow);
                         }

                        .end_marked_diamond{
                            marker-end: url(#diamond);
                         }
                        .start_marked_diamond{
                            marker-start: url(#diamond);
                         }

                        .end_marked_circle{
                            marker-end: url(#circle);
                         }
                        .start_marked_circle{
                            marker-start: url(#circle);
                         }

                        .end_marked_open_circle{
                            marker-end: url(#open_circle);
                         }
                        .start_marked_open_circle{
                            marker-start: url(#open_circle);
                         }

                        .end_marked_big_open_circle{
                            marker-end: url(#big_open_circle);
                         }
                        .start_marked_big_open_circle{
                            marker-start: url(#big_open_circle);
                         }

                         
                        </style>
    <defs>
        <marker id="arrow" viewBox="-2 -2 8 8" refX="4" refY="2" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <polygon points="0,0 0,4 4,2 0,0"></polygon>
        </marker>
        <marker id="diamond" viewBox="-2 -2 8 8" refX="4" refY="2" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <polygon points="0,2 2,0 4,2 2,4 0,2"></polygon>
        </marker>
        <marker id="circle" viewBox="0 0 8 8" refX="4" refY="4" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <circle cx="4" cy="4" r="2" class="filled"></circle>
        </marker>
        <marker id="open_circle" viewBox="0 0 8 8" refX="4" refY="4" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <circle cx="4" cy="4" r="2" class="bg_filled"></circle>
        </marker>
        <marker id="big_open_circle" viewBox="0 0 8 8" refX="4" refY="4" markerWidth="7" markerHeight="7" orient="auto-start-reverse">
            <circle cx="4" cy="4" r="3" class="bg_filled"></circle>
        </marker>
    </defs>
    <rect class="backdrop" x="0" y="0" width="472" height="432"></rect>
    <text x="98" y="60" >1</text>
    <text x="226" y="60" >y12</text>
    <text x="370" y="60" >2</text>
    <text x="66" y="140" >y1</text>
    <text x="402" y="140" >y2</text>
    <text x="170" y="156" >y13</text>
    <line x1="16" y1="200" x2="72" y2="200" class="solid"></line>
    <line x1="408" y1="200" x2="464" y2="200" class="solid"></line>
    <line x1="32" y1="216" x2="56" y2="216" class="solid"></line>
    <line x1="424" y1="216" x2="448" y2="216" class="solid"></line>
    <line x1="40" y1="232" x2="48" y2="232" class="solid"></line>
    <text x="242" y="236" >3</text>
    <line x1="432" y1="232" x2="440" y2="232" class="solid"></line>
    <text x="258" y="316" >y3</text>
    <line x1="208" y1="376" x2="264" y2="376" class="solid"></line>
    <line x1="216" y1="392" x2="256" y2="392" class="solid"></line>
    <line x1="232" y1="408" x2="240" y2="408" class="solid"></line>
    <text x="274" y="156" >y23</text>
    <g>
        <line x1="92" y1="0" x2="92" y2="112" class="solid"></line>
        <line x1="44" y1="56" x2="92" y2="56" class="solid"></line>
        <line x1="44" y1="56" x2="44" y2="104" class="solid"></line>
        <line x1="92" y1="88" x2="108" y2="88" class="solid"></line>
        <line x1="108" y1="88" x2="132" y2="136" class="solid"></line>
        <line x1="188" y1="8" x2="284" y2="8" class="solid"></line>
        <line x1="188" y1="8" x2="188" y2="40" class="solid"></line>
        <line x1="284" y1="8" x2="284" y2="40" class="solid"></line>
        <line x1="92" y1="24" x2="188" y2="24" class="solid"></line>
        <line x1="188" y1="40" x2="284" y2="40" class="solid"></line>
        <line x1="380" y1="0" x2="380" y2="112" class="solid"></line>
        <line x1="284" y1="24" x2="380" y2="24" class="solid"></line>
        <line x1="380" y1="56" x2="436" y2="56" class="solid"></line>
        <line x1="436" y1="56" x2="436" y2="104" class="solid"></line>
        <line x1="364" y1="88" x2="380" y2="88" class="solid"></line>
        <line x1="364" y1="88" x2="340" y2="136" class="solid"></line>
        <path d="M 32,104 A 4,4 0,0,0 28,108" class="nofill"></path>
        <line x1="28" y1="108" x2="28" y2="148" class="solid"></line>
        <line x1="32" y1="104" x2="56" y2="104" class="solid"></line>
        <path d="M 56,104 A 4,4 0,0,1 60,108" class="nofill"></path>
        <line x1="60" y1="108" x2="60" y2="148" class="solid"></line>
        <path d="M 28,148 A 4,4 0,0,0 32,152" class="nofill"></path>
        <line x1="32" y1="152" x2="56" y2="152" class="solid"></line>
        <line x1="44" y1="152" x2="44" y2="192" class="solid"></line>
        <path d="M 60,148 A 4,4 0,0,1 56,152" class="nofill"></path>
        <path d="M 424,104 A 4,4 0,0,0 420,108" class="nofill"></path>
        <line x1="420" y1="108" x2="420" y2="148" class="solid"></line>
        <line x1="424" y1="104" x2="448" y2="104" class="solid"></line>
        <path d="M 448,104 A 4,4 0,0,1 452,108" class="nofill"></path>
        <line x1="452" y1="108" x2="452" y2="148" class="solid"></line>
        <path d="M 420,148 A 4,4 0,0,0 424,152" class="nofill"></path>
        <line x1="424" y1="152" x2="448" y2="152" class="solid"></line>
        <line x1="436" y1="152" x2="436" y2="192" class="solid"></line>
        <path d="M 452,148 A 4,4 0,0,1 448,152" class="nofill"></path>
        <path d="M 120,136 A 3,3 0,0,0 118,140" class="nofill"></path>
        <line x1="118" y1="140" x2="136" y2="176" class="solid"></line>
        <line x1="120" y1="136" x2="144" y2="136" class="solid"></line>
        <path d="M 144,136 A 8,8 0,0,1 150,140" class="nofill"></path>
        <line x1="150" y1="140" x2="168" y2="176" class="solid"></line>
        <line x1="136" y1="176" x2="138" y2="180" class="solid"></line>
        <path d="M 138,180 A 8,8 0,0,0 144,184" class="nofill"></path>
        <line x1="144" y1="184" x2="168" y2="184" class="solid"></line>
        <line x1="156" y1="184" x2="168" y2="208" class="solid"></line>
        <line x1="168" y1="176" x2="170" y2="180" class="solid"></line>
        <path d="M 170,180 A 3,3 0,0,1 168,184" class="nofill"></path>
        <line x1="168" y1="208" x2="172" y2="216" class="solid"></line>
        <line x1="172" y1="216" x2="172" y2="248" class="solid"></line>
        <path d="M 328,136 A 8,8 0,0,0 322,140" class="nofill"></path>
        <line x1="322" y1="140" x2="304" y2="176" class="solid"></line>
        <line x1="328" y1="136" x2="352" y2="136" class="solid"></line>
        <path d="M 352,136 A 3,3 0,0,1 354,140" class="nofill"></path>
        <line x1="354" y1="140" x2="336" y2="176" class="solid"></line>
        <line x1="304" y1="176" x2="302" y2="180" class="solid"></line>
        <path d="M 302,180 A 3,3 0,0,0 304,184" class="nofill"></path>
        <line x1="304" y1="184" x2="328" y2="184" class="solid"></line>
        <line x1="316" y1="184" x2="304" y2="208" class="solid"></line>
        <line x1="336" y1="176" x2="334" y2="180" class="solid"></line>
        <path d="M 334,180 A 8,8 0,0,1 328,184" class="nofill"></path>
        <line x1="304" y1="208" x2="300" y2="216" class="solid"></line>
        <line x1="300" y1="216" x2="300" y2="248" class="solid"></line>
        <line x1="144" y1="248" x2="328" y2="248" class="solid"></line>
        <line x1="236" y1="248" x2="236" y2="280" class="solid"></line>
        <path d="M 224,280 A 4,4 0,0,0 220,284" class="nofill"></path>
        <line x1="220" y1="284" x2="220" y2="324" class="solid"></line>
        <line x1="224" y1="280" x2="248" y2="280" class="solid"></line>
        <path d="M 248,280 A 4,4 0,0,1 252,284" class="nofill"></path>
        <line x1="252" y1="284" x2="252" y2="324" class="solid"></line>
        <path d="M 220,324 A 4,4 0,0,0 224,328" class="nofill"></path>
        <line x1="224" y1="328" x2="248" y2="328" class="solid"></line>
        <line x1="236" y1="328" x2="236" y2="368" class="solid"></line>
        <path d="M 252,324 A 4,4 0,0,1 248,328" class="nofill"></path>
    </g>
</svg>
</p>
</section>
<section>

    <div class="kudo-container" style="display: none" data-post-id="drawing-in-ascii">
        <button class="kudo-button" aria-label="Give this post a kudo">
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="kudo-heart" x="0px" y="0px" width="512px" height="512px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve">
            <path class="kudo-heart-path" id="kudo-heart-path" d="M429.9,95.6c-40.4-42.1-106-42.1-146.4,0L256,124.1l-27.5-28.6c-40.5-42.1-106-42.1-146.4,0c-45.5,47.3-45.5,124.1,0,171.4   L256,448l173.9-181C475.4,219.7,475.4,142.9,429.9,95.6z" />
          </svg>
        </button>
        <div class="kudo-count-message">
          <span class="kudo-count"></span> <span class="kudo-word"></span>
        </div>
        <div class="kudo-thanks">
          <div class="kudo-thanks-heading">Thanks!</div>
        </div>
    </div>

</section>
<section>
    <opt-in-script src="https://utteranc.es/client.js"
        repo="kdheepak/blog"
        issue-term="url"
        theme="github-light"
        crossorigin="anonymous"
        async>
    <button class="comments-button">Show Comments</button>
    </opt-in-script>
</section>
</article>
<script>
var figures =
  Array.prototype.slice.call(document.getElementsByClassName("figure"),0)
  .concat(
    Array.prototype.slice.call(document.getElementsByTagName("figure"),0));

for (var i = 0; i < figures.length; i++) {
  var figure = figures[i];
  var imgs = figure.getElementsByTagName("img");
  if (imgs.length > 0) {
    classes = imgs[0].classList;
    for (var j = 0; j < classes.length; j++) {
        if (classes[j] === "fullwidth") {
            figure.classList.add(classes[j]);
        }
    }
  }
}
</script>
<footer>
    <p>
    <a rel="license noopener noreferrer" target="_blank" href="http://creativecommons.org/licenses/by/4.0/"><img alt="This work is licensed under a Creative Commons Attribution 4.0 International License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a>
    </p>
</footer>
<script data-goatcounter="https://kdheepak.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/vim.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/julia.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/nim.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/latex.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/matlab.min.js"></script>
<script>
    document.querySelectorAll('pre:not([class])').forEach(function($) {
        $.className = 'no-highlight';
    });
    hljs.initHighlightingOnLoad();
</script>
<script src="/js/opt-in-script.js"></script>
<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-database.js"></script>
<script>
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyC_lk4_TkwwjzgthwVBR0JXrDRQMH2mDH8",
    authDomain: "blog-4ac79.firebaseapp.com",
    databaseURL: "https://blog-4ac79.firebaseio.com",
    projectId: "blog-4ac79",
    storageBucket: "blog-4ac79.appspot.com",
    messagingSenderId: "57327928077",
    appId: "1:57327928077:web:5acf8eaf01bcb850d76644",
    measurementId: "G-YKT2PQSD10"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
</script>
<script src="/js/kudos.js"></script>
</body>
</html>
